{"version":3,"file":"js/795-legacy.e3b3c49c.js","mappings":"sKAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAsBH,EAAII,MAAMC,GAAO,OAAOL,EAAIM,GAAG,IACnGC,EAAkB,CAAC,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBE,EAAGL,EAAII,MAAMC,IAAIH,EAAG,OAAOG,EAAG,OAAO,CAACA,EAAG,MAAM,CAACG,YAAY,e,4GCa3I,G,QAAA,CACAC,KAAAA,kBAEAC,WAAAA,GAEAC,KALA,WAMA,OAAAC,UAAAA,OAGAC,QATA,WASA,gLACAC,IAAAA,IACA,qCACAC,MAAA,YAIA,GAFA,sBAGA,iBACA,mBACA,uBACA,eAKA,OAHAC,aAAAA,WAAAA,iBACAA,aAAAA,WAAAA,oBACA,gBAAAP,KAAAA,2BAIAQ,OAAA,YACAC,QAAAA,IAAAA,2BAAAA,MApBA,uBAwBAC,GAAA,qDACAC,EAAAD,EAAAA,WACAE,EAAA,0BAEAC,EAAAC,GAAAA,CAAAA,GAEAC,EAAA,kBAMAC,EAAA,CACA,kCACA,0CACA,+BACA,6CACA,oEACA,kCACA,qDACAC,KAAAA,oCACAC,OAAAA,MACA,sCACAC,WAAAA,aACAC,IAAAA,OAhDA,UAmDAf,IAAAA,IAEAgB,EAAAA,EAAAA,qBAAAA,EAAAA,YAAAA,EACAL,GAEAV,MAAA,YAEA,uCAWA,GAVAC,aAAAA,QACA,gBACA,oDAGAA,aAAAA,QACA,cACAe,EAAAA,KAAAA,KAAAA,GAAAA,aAIAC,KAAAA,MAAAA,EAAAA,KAAAA,KAAAA,GAAAA,aACAA,KAAAA,MAAAA,IAAAA,MACA,EAKA,OAHAhB,aAAAA,WAAAA,iBACAA,aAAAA,WAAAA,oBACA,gBAAAP,KAAAA,mBAIAO,aAAAA,QAAAA,QAAAA,EAAAA,KAAAA,KAAAA,GAAAA,OACAA,aAAAA,QAAAA,eAAAA,EAAAA,KAAAA,KAAAA,GAAAA,SACAA,aAAAA,QACA,eACAe,EAAAA,KAAAA,KAAAA,GAAAA,iBAEAf,aAAAA,QAAAA,YAAAA,EAAAA,WACA,kCAEA,gBAAAP,KAAAA,OAAAwB,OAAAA,CAAAC,YAAAA,UAEA,gBAAAzB,KAAAA,gBAGAQ,OAAA,YACAC,QAAAA,IAAAA,2BAAAA,MA/FA,6DAkGAA,QAAAA,MAAAA,EAAAA,IACAiB,MAAAA,wBAnGA,6DAkHAC,QA3HA,aA6HAC,QAAAA,KC3I2Q,I,UCQvQC,GAAY,OACd,EACAvC,EACAQ,GACA,EACA,KACA,WACA,MAIF,EAAe+B,EAAiB","sources":["webpack://vuejs-precise/./src/views/RedirectVoucher.vue?38e5","webpack://vuejs-precise/src/views/RedirectVoucher.vue","webpack://vuejs-precise/./src/views/RedirectVoucher.vue?f6bf","webpack://vuejs-precise/./src/views/RedirectVoucher.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('body',[_c('div',{staticClass:\"loader\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <body>\r\n    <div class=\"loader\"></div>\r\n  </body>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nimport axios from \"axios\";\r\nimport { api_url } from \"../global_variable/global_variable.js\";\r\nimport { promo_list } from \"../global_variable/promo_list.js\";\r\nimport sha256 from \"js-sha256\";\r\nimport router from \"@/router/index.js\";\r\n\r\nexport default {\r\n  name: \"RedirectVoucher\",\r\n\r\n  components: {},\r\n\r\n  data() {\r\n    return { client_ip: null };\r\n  },\r\n\r\n  async created() {\r\n    await axios\r\n      .get(\"https://api.ipify.org?format=json\")\r\n      .then((response) => {\r\n        // console.log(response.data.ip);\r\n        this.client_ip = response.data.ip;\r\n\r\n        if (\r\n          this.client_ip == \"\" ||\r\n          this.client_ip == null ||\r\n          this.client_ip == NaN ||\r\n          this.client_ip == undefined\r\n        ) {\r\n          localStorage.removeItem(\"voucher_token\");\r\n          localStorage.removeItem(\"pe_end_date\");\r\n          this.$router.push({ name: \"ip-pernah-digunakan\" });\r\n          return;\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Redirect.vue (error) :: \", error);\r\n      });\r\n\r\n    try {\r\n      var dateNow = new Date().toISOString().slice(0, 10).replace(/-/g, \"\");\r\n      var tgl = dateNow.toString();\r\n      var kunci = \"SSO\" + \"4lfag1ft\" + tgl + \"precise\";\r\n      // console.log(kunci);\r\n      var token = sha256(kunci);\r\n\r\n      var link_id = this.$route.query.id;\r\n      // console.log(link_id);\r\n      // console.log(\r\n      //   api_url + \"/event-list?token=\" + token + \"&link_id=\" + link_id\r\n      // );\r\n\r\n      const headers = {\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n        \"Access-Control-Allow-Credentials\": \"true\",\r\n        \"Access-Control-Allow-Methods\":\r\n          \"GET, PUT, POST, DELETE, OPTIONS, post, get\",\r\n        \"Access-Control-Allow-Headers\": \"Origin, Content-Type, X-Auth-Token\",\r\n        \"Content-Type\": \"application/json\",\r\n        \"Content-Length\": \"<calculated when request is sent>\",\r\n        Host: \"<calculated when request is sent>\",\r\n        Accept: \"*/*\",\r\n        \"Accept-Encoding\": \"gzip, deflate, br\",\r\n        Connection: \"keep-alive\",\r\n        app: \"sso\",\r\n      };\r\n\r\n      await axios\r\n        .get(\r\n          api_url + \"/event-list?token=\" + token + \"&link_id=\" + link_id,\r\n          headers\r\n        )\r\n        .then((response) => {\r\n          // console.log(response.data);\r\n          if (response.data.response_message == \"success\") {\r\n            localStorage.setItem(\r\n              \"voucher_token\",\r\n              \"7ce7fc0a19aefa2-b266f5dbf6eeb5-f7ey7yf772vdfv626\"\r\n            );\r\n\r\n            localStorage.setItem(\r\n              \"pe_end_date\",\r\n              response.data.data[0].pe_end_date\r\n            );\r\n            // if the event has not begin/ past end date\r\n            if (\r\n              Date.parse(response.data.data[0].pe_end_date) -\r\n                Date.parse(new Date()) <\r\n              0\r\n            ) {\r\n              localStorage.removeItem(\"voucher_token\");\r\n              localStorage.removeItem(\"pe_end_date\");\r\n              this.$router.push({ name: \"promo-berakhir\" });\r\n              return;\r\n            }\r\n\r\n            localStorage.setItem(\"pe_id\", response.data.data[0].pe_id);\r\n            localStorage.setItem(\"voucher_type\", response.data.data[0].pe_type);\r\n            localStorage.setItem(\r\n              \"subject_mail\",\r\n              response.data.data[0].pe_subject_mail\r\n            );\r\n            localStorage.setItem(\"client_ip\", this.client_ip);\r\n            var router_data = response.data.data[0].pe_body_mail;\r\n            // console.log(router_data);\r\n            this.$router.push({ name: \"form\", params: { router_data } });\r\n          } else {\r\n            this.$router.push({ name: \"notFound\" });\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Redirect.vue (error) :: \", error);\r\n        });\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert(\"Error: koneksi gagal\");\r\n    }\r\n    // // console.log(\"The id is: \", this.$route.query.id);\r\n    // var keyToFind = this.$route.query.id;\r\n    // for (var i in promo_list) {\r\n    //   console.log(promo_list[i]);\r\n    //   if (promo_list[i].r_id == keyToFind) {\r\n    //     localStorage.setItem(\"voucher_token\", \"7ce7fc0a19aefa2b266f5dbf6eeb5\");\r\n    //     localStorage.setItem(\"voucher_type\", \"ig\");\r\n    //     this.$router.push({ name: \"form\" });\r\n    //   }\r\n    // }\r\n    // this.$router.push({ name: \"notFound\" });\r\n  },\r\n\r\n  mounted() {},\r\n\r\n  methods: {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbody {\r\n  /* background-color: #073e5d; */\r\n  background-size: cover;\r\n  /* font-family: Montserrat; */\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.loader {\r\n  border: 8px solid #f3f3f3;\r\n  border-radius: 50%;\r\n  border-top: 8px solid #3498db;\r\n  width: 60px;\r\n  height: 60px;\r\n  -webkit-animation: spin 2s linear infinite; /* Safari */\r\n  animation: spin 2s linear infinite;\r\n}\r\n\r\n/* Safari */\r\n@-webkit-keyframes spin {\r\n  0% {\r\n    -webkit-transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    -webkit-transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@keyframes spin {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RedirectVoucher.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RedirectVoucher.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RedirectVoucher.vue?vue&type=template&id=113b8271&scoped=true&\"\nimport script from \"./RedirectVoucher.vue?vue&type=script&lang=js&\"\nexport * from \"./RedirectVoucher.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RedirectVoucher.vue?vue&type=style&index=0&id=113b8271&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"113b8271\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","staticClass","name","components","data","client_ip","created","axios","then","localStorage","catch","console","dateNow","tgl","kunci","token","sha256","link_id","headers","Host","Accept","Connection","app","api_url","response","Date","params","router_data","alert","mounted","methods","component"],"sourceRoot":""}