"use strict";(self["webpackChunkvuejs_precise"]=self["webpackChunkvuejs_precise"]||[]).push([[795],{8795:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("body",[a("div",{staticClass:"loader"})])}],o=a(6198),c=(a(5666),a(4916),a(5306),a(7042),a(1539),a(9714),a(9669)),i=a.n(c),l=a(8815),s=a(6814),u=a.n(s),p=(a(6665),{name:"RedirectVoucher",components:{},data:function(){return{client_ip:null}},created:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var a,n,r,o,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i().get("https://api.ipify.org?format=json").then((function(t){if(e.client_ip=t.data.ip,""==e.client_ip||null==e.client_ip||NaN==e.client_ip||void 0==e.client_ip)return localStorage.removeItem("voucher_token"),localStorage.removeItem("pe_end_date"),void e.$router.push({name:"ip-pernah-digunakan"})})).catch((function(e){console.log("Redirect.vue (error) :: ",e)}));case 2:return t.prev=2,a=(new Date).toISOString().slice(0,10).replace(/-/g,""),n=a.toString(),r="SSO4lfag1ft"+n+"precise",o=u()(r),c=e.$route.query.id,s={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET, PUT, POST, DELETE, OPTIONS, post, get","Access-Control-Allow-Headers":"Origin, Content-Type, X-Auth-Token","Content-Type":"application/json","Content-Length":"<calculated when request is sent>",Host:"<calculated when request is sent>",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",app:"sso"},t.next=11,i().get(l.Y+"/event-list?token="+o+"&link_id="+c,s).then((function(t){if("success"==t.data.response_message){if(localStorage.setItem("voucher_token","7ce7fc0a19aefa2-b266f5dbf6eeb5-f7ey7yf772vdfv626"),localStorage.setItem("pe_end_date",t.data.data[0].pe_end_date),Date.parse(t.data.data[0].pe_end_date)-Date.parse(new Date)<0)return localStorage.removeItem("voucher_token"),localStorage.removeItem("pe_end_date"),void e.$router.push({name:"promo-berakhir"});localStorage.setItem("pe_id",t.data.data[0].pe_id),localStorage.setItem("voucher_type",t.data.data[0].pe_type),localStorage.setItem("subject_mail",t.data.data[0].pe_subject_mail),localStorage.setItem("client_ip",e.client_ip);var a=t.data.data[0].pe_body_mail;e.$router.push({name:"form",params:{router_data:a}})}else e.$router.push({name:"notFound"})})).catch((function(e){console.log("Redirect.vue (error) :: ",e)}));case 11:t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](2),console.error(t.t0),alert("Error: koneksi gagal");case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()},mounted:function(){},methods:{}}),d=p,_=a(1001),m=(0,_.Z)(d,n,r,!1,null,"113b8271",null),f=m.exports}}]);
//# sourceMappingURL=795-legacy.e3b3c49c.js.map